<!doctype html>
<html lang="pt-BR">
<head>
<style>.btn-back{display:inline-block;padding:.55rem .9rem;background:#111827;border:1px solid #334155;border-radius:.6rem;color:#bfdbfe;text-decoration:none;line-height:1}.btn-back:hover{background:#1e293b}</style>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Admin • Kokoro</title>
    <style>
        body{margin:0;background:#0c0f14;color:#eaeaea;font-family:system-ui,Segoe UI,Roboto,Arial}
        header{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #1f2530}
        .grid{display:grid;gap:12px;padding:24px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
        a.card{display:block;padding:18px;background:#111827;border:1px solid #1f2530;border-radius:14px;text-decoration:none;color:#eaeaea}
        a.card:hover{border-color:#3b82f6}
        h1{font-size:20px;margin:0}
        small{opacity:.7}
    </style>
</head>
<body>
<header>
    <h1>Admin • Kokoro</h1>
    <nav><a href="/" style="color:#9ca3af;text-decoration:none">← <a class="btn-nav" href="/"><span class="chevron">←</span> Voltar ao site</a></a></nav>
</header>

<main class="grid">
    <a class="card" href="/admin/cadastro/lista.html">
        <strong>Alunos • Lista</strong><br><small>Ver/editar cadastros</small>
    </a>
    <a class="card" href="/admin/cadastro/editar.html">
        <strong>Graduação (numeração)</strong><br><small>Controle vitalício</small>
    </a>
    <a class="card" href="/user/cadastro/cadastro.html">
        <strong>Novo cadastro</strong><br><small>Formulário público</small>
    </a>
    <a class="card" href="/admin/financeiro/financeiro.html">
        <strong>Financeiro</strong><br><small>Mensalidades, recebimentos</small>
    </a>
</main>
</body>
</html>
<section>
  <h2>Alunos</h2>
  <div id="alunosWrap">
    <table>
      <thead><tr><th>Nome</th><th>Email</th><th>Tel</th><th>Nº Cadastro</th><th>Criado</th></tr></thead>
      <tbody id="alunosTbody"></tbody>
    </table>
  </div>
</section>
<script>
async function loadAlunos(){
  try{
    const r = await fetch('/api/alunos/list');
    const j = await r.json();
    const tb = document.getElementById('alunosTbody');
    if (!tb) return;
    tb.innerHTML = '';
    (j.rows || []).forEach(a=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${a.nome || ''}</td>
        <td>${a.email || ''}</td>
        <td>${a.telefone || ''}</td>
        <td><span class="pill">${a.cad_numero || '&nbsp;'}</span></td>
        <td>${new Date(a.created_at).toLocaleString()}</td>`;
      tb.appendChild(tr);
    });
  }catch(e){ console.warn('Falha alunos', e); }
}
document.addEventListener('DOMContentLoaded', loadAlunos);
</script>
<style>
  table{width:100%; border-collapse:collapse; background:#171717}
  th,td{padding:10px; border-bottom:1px solid #2a2a2a; font-size:14px}
  th{color:#9ad1ff; text-align:left}
  .pill{background:#222; border:1px solid #333; padding:2px 8px; border-radius:999px; font-family:monospace}
</style>
