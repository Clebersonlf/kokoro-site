<!doctype html><html lang="pt-BR"><head>
<style>.btn-back{display:inline-block;padding:.55rem .9rem;background:#111827;border:1px solid #334155;border-radius:.6rem;color:#bfdbfe;text-decoration:none;line-height:1}.btn-back:hover{background:#1e293b}</style>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Graduação (numeração) • Lista</title>
<link rel="stylesheet" href="/css/style.css">
<style>
.wrap{max-width:1100px;margin:24px auto;padding:0 16px;color:#e5e7eb}
.top{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
.top a{color:#8ecbff;text-decoration:none}
table{width:100%;border-collapse:collapse;background:#12151a;border:1px solid #1f2937;border-radius:10px;overflow:hidden}
th,td{padding:10px;border-bottom:1px solid #1f2937;text-align:left}
th{color:#93c5fd;font-weight:600;background:#0f141a}
.actions a{color:#8ecbff;text-decoration:none;margin-right:8px}
</style>
<link rel="stylesheet" href="/admin/css/linkbtn.css">

<link rel="stylesheet" href="/admin/css/btns.css">
</head><body>
<div class="wrap">
  <div class="top">
    <a class="btn-back" href="/admin/index.html">← <a class="btn-nav" href="/admin/index.html"><span class="chevron">←</span> Voltar ao Admin</a></a>
    <div>
      <a class="btn btn-primary" href="/admin/graduacao/nova.html"><a class="btn-nav" href="/admin/graduacao/nova.html" class="primary-btn">+ Adicionar graduação</a></a>
    </div>
  </div>

  <h2 style="color:#9ad1ff">Graduação (numeração) • Lista</h2>

  <table>
    <thead><tr>
      <th>Aluno</th><th>Email</th><th>Nº</th><th>Faixa</th><th>Data</th><th>Ações</th>
    </tr></thead>
    <tbody id="tb"></tbody>
  </table>
</div>

<script>
async function load(){
  const tb = document.getElementById('tb');
  tb.innerHTML = '<tr><td colspan="6">Carregando…</td></tr>';
  try{
    const r = await fetch('/api/graduacoes');
    const js = await r.json();
    if(!js.ok) throw new Error(js.message || 'Falha');
    if(!js.data.length){
      tb.innerHTML = '<tr><td colspan="6">Nenhum registro.</td></tr>';
      return;
    }
    tb.innerHTML = js.data.map(g=>`
      <tr>
        <td>${g.aluno_nome || ''}</td>
        <td>${g.aluno_email || ''}</td>
        <td>${g.grad_numero || ''}</td>
        <td>${g.faixa || ''}</td>
        <td>${g.data_graduacao ? new Date(g.data_graduacao).toLocaleDateString() : ''}</td>
        <td class="actions">
          <a href="/admin/graduacao/editar.html?id=${g.id}">Editar</a>
        </td>
      </tr>`).join('');
  }catch(e){
    tb.innerHTML = '<tr><td colspan="6">Falha ao carregar a lista.</td></tr>';
  }
}
document.addEventListener('DOMContentLoaded', load);
</script>
</body></html>
